@model FitMeApp.WEB.Contracts.ViewModels.VisitingChartViewModel
    <script src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
    <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>

    <h3>Chart Page</h3>
    <div class="container">
        <div class="row">
            <div class="col-md-3">
                <div id="dayOfWeek">
                    @foreach (var day in Enum.GetValues(typeof(DayOfWeek)))
                    {
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="currentDay" value="@day" id="d_@day">
                            <label class="form-check-label" for="@day">
                                @day
                            </label>
                        </div>
                    }
                </div>
            </div>
            <div class="col-md-9">

                @*@await Component.InvokeAsync("VisitingChartBySelectedDayOfWeek", new { model = Model.First(x=>x.DayOfWeek == DayOfWeek.Monday) })*@
                <div id="chartContainer" style="height: 350px; width: 100%;"></div>
            </div>
        </div>
    </div>


    <script>

    document.getElementById("dayOfWeek").addEventListener("click",
        function () {
            let selectedDay = document.querySelector('input[name="currentDay"]:checked').value;
            var gymId = @Html.Raw(Json.Serialize(Model.GymId));
            var gymIdJson = JSON.parse(gymId);

            $.post(`https://localhost:44384/api/getvisitingchartline`,
                    {
                        gymId: gymId,
                        selectedDay: selectedDay
                    })
                .done(function(data) {
                    var dataPoints = [];

                    for (var i = 0; i < data.length; i++) {
                        dataPoints.push({
                            x: data[i].Hour,
                            y: data[i].NumberOfVisitors
                        });
                    }


                    var chart = new CanvasJS.Chart("chartContainer",
                        {
                            animationEnabled: true,
                            theme: "light1", // "light1","light2", "dark1", "dark2"
                            title: { text: "Visiting on " + selectedDay },
                            axisY: {
                                title: "number of people",
                                titleFontSize: 24,
                                includeZero: true
                            },
                            legend: {
                                verticalAlign: "bottom",
                                horizontalAlign: "center"
                            },
                            data: [
                                {
                                    type: "column",
                                    color: "#A855FE",
                                    legendText: "visitors in hour",
                                    showInLegend: true,
                                    toolTipContent: "{label}<br> <b>~{y} people</b>",
                                    dataPoints: dataPoints
                                }
                            ]
                        });

                    chart.render();
                }
            );
        },
        false
    );
    </script>









